{% extends "base.html" %}

{% block title %}Assistente Virtual - Change Life Academy{% endblock %}

{% block content %}
<!-- Navigation -->
<nav class="navbar navbar-expand-lg navbar-dark gym-navbar">
    <div class="container">
        <a class="navbar-brand" href="{{ url_for('dashboard') }}">
            <i class="bi bi-arrow-left"></i> Voltar ao Ãnicio
        </a>
        <div class="navbar-nav ms-auto">
            <span class="navbar-text">
                <i class="bi bi-person-circle"></i> {{ user.name }}
            </span>
        </div>
    </div>
</nav>

<!-- Chatbot Content -->
<div class="container-fluid py-4">
    <div class="row justify-content-center">
        <div class="col-md-8 col-lg-6">
            <div class="chatbot-container">
                <!-- Header -->
                <div class="chatbot-header">
                    <div class="chatbot-avatar">
                        <i class="bi bi-emoji-smile"></i>
                    </div>
                    <div class="chatbot-info">
                        <h4>Happy</h4>
                        <p>Assistente Virtual da Change Life Academy</p>
                    </div>
                </div>

                <!-- Chat Messages -->
                <div class="chatbot-messages" id="chatbotMessages">
                    <div class="message bot-message">
                        <div class="message-content">
                            <i class="bi bi-emoji-smile"></i>
                            <div class="message-text">
                                <p>OlÃ¡, {{ user.name }}! ğŸ‘‹</p>
                                <p>Meu nome Ã© <strong>Happy</strong> e sou a assistente virtual da Change Life Academy! ğŸ˜Š</p>
                                <p>Estou aqui para te ajudar a conhecer nossa empresa e responder todas as suas dÃºvidas sobre nossa cultura, estrutura e benefÃ­cios.</p>
                                <p>Fico muito feliz em te receber em nossa equipe! ğŸ‰</p>
                                <p>Escolha uma das opÃ§Ãµes abaixo para comeÃ§armos nossa conversa:</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Typing Indicator -->
                <div class="typing-indicator" id="typingIndicator" style="display: none;">
                    <div class="message-content">
                        
                        <div class="typing-dots">
                            <span></span>
                            <span></span>
                            <span></span>
                        </div>
                    </div>
                </div>

                <!-- Options -->
                <div class="chatbot-options">
                    <div class="row">
                        <div class="col-md-6 mb-3">
                            <button class="btn chatbot-option" onclick="showInfo('quem-somos')">
                                <span>Quem Somos</span>
                            </button>
                        </div>
                        <div class="col-md-6 mb-3">
                            <button class="btn chatbot-option" onclick="showInfo('missao-visao-valores')">
                                <span>MissÃ£o, VisÃ£o e Valores</span>
                            </button>
                        </div>
                        <div class="col-md-6 mb-3">
                            <button class="btn chatbot-option" onclick="showInfo('departamentos')">
                                <span>Departamentos</span>
                            </button>
                        </div>
                        <div class="col-md-6 mb-3">
                            <button class="btn chatbot-option" onclick="showInfo('beneficios')">
                                <span>BenefÃ­cios</span>
                            </button>
                        </div>
                        <div class="col-md-6 mb-3">
                            <button class="btn chatbot-option" onclick="showInfo('estrutura-hierarquica')">
                                <span>Estrutura HierÃ¡rquica</span>
                            </button>
                        </div>
                        <div class="col-md-6 mb-3">
                            <button class="btn chatbot-option" onclick="showInfo('feedbacks')">
                                <span>Feedbacks</span>
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Back to Dashboard -->
                <div class="text-center mt-4">
                    <a href="{{ url_for('dashboard') }}" class="btn gym-btn">
                        <i class="bi bi-house"></i> Voltar ao Ãnicio
                    </a>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script>
function showInfo(topic) {
    const messagesContainer = document.getElementById('chatbotMessages');
    const typingIndicator = document.getElementById('typingIndicator');
    
    // Remove active class from all options
    document.querySelectorAll('.chatbot-option').forEach(btn => {
        btn.classList.remove('active');
    });
    
    // Add active class to clicked option
    event.target.closest('.chatbot-option').classList.add('active');
    
    // Clear previous messages and show typing indicator
    messagesContainer.innerHTML = '';
    typingIndicator.style.display = 'block';
    
    // Scroll to bottom
    messagesContainer.scrollTop = messagesContainer.scrollHeight;
    
    // Simulate typing delay
    setTimeout(() => {
        typingIndicator.style.display = 'none';
        typeMessage(topic);
    }, 800);
}

function typeMessage(topic) {
    const messagesContainer = document.getElementById('chatbotMessages');
    let content = '';
    
    switch(topic) {
        case 'quem-somos':
            content = `
                <div class="message bot-message">
                    <div class="message-content">
                        <i class="bi bi-emoji-smile"></i>
                        <div class="message-text">
                            <h5><i class="bi bi-building"></i> Quem Somos</h5>
                            <p>Que legal que vocÃª quer nos conhecer melhor! ğŸ˜Š</p>
                            <p>A <strong>Change Life Academy</strong> Ã© uma empresa lÃ­der no setor de fitness e bem-estar, fundada em 2010 com a missÃ£o de transformar vidas atravÃ©s da atividade fÃ­sica.</p>
                            <p>Com mais de 10 anos de experiÃªncia, oferecemos serviÃ§os de alta qualidade em:</p>
                            <ul>
                                <li>MusculaÃ§Ã£o e condicionamento fÃ­sico ğŸ’ª</li>
                                <li>Aulas de grupo (Yoga, Pilates, Crossfit) ğŸ§˜â€â™€ï¸</li>
                                <li>Personal training ğŸƒâ€â™‚ï¸</li>
                                <li>NutriÃ§Ã£o esportiva ğŸ¥—</li>
                                <li>Fisioterapia ğŸ¥</li>
                            </ul>
                            <p>Nossa equipe Ã© formada por profissionais altamente qualificados e apaixonados pelo que fazem. Eles sÃ£o o coraÃ§Ã£o da nossa empresa! â¤ï¸</p>
                        </div>
                    </div>
                </div>
            `;
            break;
            
        case 'missao-visao-valores':
            content = `
                <div class="message bot-message">
                    <div class="message-content">
                        
                        <div class="message-text">
                            <h5><i class="bi bi-eye"></i> MissÃ£o, VisÃ£o e Valores</h5>
                            <p>Essa Ã© uma das minhas partes favoritas para compartilhar! âœ¨</p>
                            
                            <p><strong>ğŸ¯ MissÃ£o</strong><br>
                            Transformar a vida das pessoas por meio da atividade fÃ­sica e atendimento humanizado, com Ãªnfaze na performance, qualidade de vida, promovendo bem-estar e saÃºde emocional ğŸ’ª</p>
                            
                            <p><strong>ğŸ‘ï¸ VisÃ£o</strong><br>
                            Ser reconhecida nacionalmente como a melhor academia em promoÃ§Ã£o a saÃºde mental, acolhimento social e uso de tecnologia de ponta, tornando-se referencia e alcanÃ§ando o maior indice de alunos fidelizados com meta em expansÃ£o nos prÃ³ximos 5 anos em diversas cidades ğŸŒŸ</p>
                            
                            <p><strong>â¤ï¸ Valores</strong><br>
                            Muito mais que uma academia de verÃ£o: um estilo de vida! colocamos nossos alunos no centro, prezando por um atendimento humano e empÃ¡tico. Promovemos mudanÃ§as e melhorias para todos que buscam uma vida saudÃ¡vel e equilibrada, buscando sempre as melhores tecnologias para proporcionar experiencias Ãºnicas</p>
                        </div>
                    </div>
                </div>
            `;
            break;
            
        case 'departamentos':
            content = `
                <div class="message bot-message">
                    <div class="message-content">
                        
                        <div class="message-text">
                            <h5><i class="bi bi-diagram-3"></i> Departamentos</h5>
                            <p>Nossa empresa Ã© como uma grande famÃ­lia, e cada departamento tem seu papel especial! ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦</p>
                            <div class="department-card">
                                <h6><i class="bi bi-people"></i> Recursos Humanos</h6>
                                <p>Nossa equipe de RH cuida de todos nÃ³s com muito carinho! Eles sÃ£o responsÃ¡veis pela gestÃ£o de pessoas, recrutamento, treinamentos e desenvolvimento profissional. ğŸ’¼</p>
                            </div>
                            <div class="department-card">
                                <h6><i class="bi bi-cash-coin"></i> Financeiro</h6>
                                <p>Eles mantÃªm tudo organizado financeiramente! GestÃ£o financeira, controle de custos, faturamento e planejamento orÃ§amentÃ¡rio. ğŸ’°</p>
                            </div>
                            <div class="department-card">
                                <h6><i class="bi bi-person-badge"></i> OperaÃ§Ãµes</h6>
                                <p>O coraÃ§Ã£o da nossa academia! CoordenaÃ§Ã£o das atividades diÃ¡rias, gestÃ£o de instrutores e supervisÃ£o das aulas. ğŸƒâ€â™€ï¸</p>
                            </div>
                            <div class="department-card">
                                <h6><i class="bi bi-megaphone"></i> Marketing</h6>
                                <p>Nossa equipe criativa! ComunicaÃ§Ã£o, divulgaÃ§Ã£o, eventos e relacionamento com clientes. Eles fazem a nossa voz ser ouvida! ğŸ“¢</p>
                            </div>
                            <div class="department-card">
                                <h6><i class="bi bi-gear"></i> ManutenÃ§Ã£o</h6>
                                <p>Nossos herÃ³is da limpeza! ManutenÃ§Ã£o de equipamentos, limpeza e conservaÃ§Ã£o das instalaÃ§Ãµes. Tudo sempre impecÃ¡vel! ğŸ§¹</p>
                            </div>
                        </div>
                    </div>
                </div>
            `;
            break;
            
        case 'beneficios':
            content = `
                <div class="message bot-message">
                    <div class="message-content">
                        
                        <div class="message-text">
                            <h5><i class="bi bi-gift"></i> BenefÃ­cios</h5>
                            <p>Uau! Essa Ã© uma das partes que mais me deixa feliz em compartilhar! ğŸ</p>
                            <p>Cuidamos muito bem da nossa equipe, e por isso oferecemos benefÃ­cios incrÃ­veis:</p>
                            <div class="benefits-grid">
                                <div class="benefit-item">
                                    <i class="bi bi-heart-pulse"></i>
                                    <h6>Plano de SaÃºde</h6>
                                    <p>Cobertura completa para vocÃª e sua famÃ­lia â¤ï¸</p>
                                </div>
                                <div class="benefit-item">
                                    <i class="bi bi-dumbbell"></i>
                                    <h6>Academia Gratuita</h6>
                                    <p>Acesso ilimitado a todos os equipamentos e aulas ğŸ’ª</p>
                                </div>
                                <div class="benefit-item">
                                    <i class="bi bi-calendar-check"></i>
                                    <h6>FÃ©rias</h6>
                                    <p>30 dias de fÃ©rias remuneradas por ano ğŸ–ï¸</p>
                                </div>
                                <div class="benefit-item">
                                    <i class="bi bi-graduation-cap"></i>
                                    <h6>Desenvolvimento</h6>
                                    <p>Cursos e certificaÃ§Ãµes pagas pela empresa ğŸ“</p>
                                </div>
                                <div class="benefit-item">
                                    <i class="bi bi-cup-hot"></i>
                                    <h6>Vale RefeiÃ§Ã£o</h6>
                                    <p>R$ 500,00 mensais para alimentaÃ§Ã£o ğŸ½ï¸</p>
                                </div>
                                <div class="benefit-item">
                                    <i class="bi bi-car-front"></i>
                                    <h6>Vale Transporte</h6>
                                    <p>100% do transporte pÃºblico ğŸšŒ</p>
                                </div>
                            </div>
                            <p>E tem muito mais! Acreditamos que colaboradores felizes fazem clientes felizes! ğŸ˜Š</p>
                        </div>
                    </div>
                </div>
            `;
            break;
            
        case 'estrutura-hierarquica':
            content = `
                <div class="message bot-message">
                    <div class="message-content">
                        
                        <div class="message-text">
                            <h5><i class="bi bi-diagram-2"></i> Estrutura HierÃ¡rquica</h5>
                            <p>Nossa estrutura Ã© bem organizada, mas sempre com muito respeito e carinho entre todos! ğŸ¤—</p>
                            <div class="hierarchy-tree">
                                <div class="hierarchy-level ceo">
                                    <i class="bi bi-crown"></i>
                                    <span>Diretoria ğŸ‘‘</span>
                                </div>
                                <div class="hierarchy-level management">
                                    <i class="bi bi-person-badge"></i>
                                    <span>Gerentes de Departamento ğŸ‘¨â€ğŸ’¼</span>
                                </div>
                                <div class="hierarchy-level supervisors">
                                    <i class="bi bi-people"></i>
                                    <span>Supervisores ğŸ‘¥</span>
                                </div>
                                <div class="hierarchy-level coordinators">
                                    <i class="bi bi-person-check"></i>
                                    <span>Coordenadores ğŸ‘¨â€ğŸ’»</span>
                                </div>
                                <div class="hierarchy-level staff">
                                    <i class="bi bi-person"></i>
                                    <span>Colaboradores ğŸ‘¨â€ğŸ’¼</span>
                                </div>
                            </div>
                            <div class="hierarchy-info">
                                <h6>PrincÃ­pios da Nossa Estrutura:</h6>
                                <p>O que mais me orgulha Ã© como nossa empresa funciona:</p>
                                <ul>
                                    <li><strong>Horizontalidade:</strong> ComunicaÃ§Ã£o direta entre todos os nÃ­veis - todos podem falar com todos! ğŸ’¬</li>
                                    <li><strong>TransparÃªncia:</strong> DecisÃµes compartilhadas e abertas - nada de segredos! ğŸ”</li>
                                    <li><strong>Desenvolvimento:</strong> Oportunidades de crescimento para todos - crescemos juntos! ğŸŒ±</li>
                                    <li><strong>Mentoria:</strong> LÃ­deres como mentores de suas equipes - aprendemos uns com os outros! ğŸ“</li>
                                </ul>
                                <p>Ã‰ uma estrutura que funciona com muito amor e respeito! â¤ï¸</p>
                            </div>
                        </div>
                    </div>
                </div>
            `;
            break;
    }
    
    // Create message container
    const messageDiv = document.createElement('div');
    messageDiv.className = 'message bot-message';
    messageDiv.innerHTML = content;
    messagesContainer.appendChild(messageDiv);
    
    // Type the content with effect
    typeWriter(messageDiv.querySelector('.message-text'), content);
}

function typeWriter(element, fullContent) {
    const tempDiv = document.createElement('div');
    tempDiv.innerHTML = fullContent;
    const fullText = tempDiv.textContent || tempDiv.innerText || '';
    
    element.innerHTML = '';
    element.classList.add('typing');
    
    let i = 0;
    let currentText = '';
    
    function typeChar() {
        if (i < fullText.length) {
            currentText += fullText.charAt(i);
            element.innerHTML = currentText;
            i++;
            
            // Variable typing speed for more natural feel
            const delay = Math.random() * 20 + 10; // 10-30ms
            setTimeout(typeChar, delay);
        } else {
            // After typing is complete, show the formatted content
            element.classList.remove('typing');
            element.innerHTML = tempDiv.innerHTML;
            
            // Scroll to bottom after content is fully loaded
            setTimeout(() => {
                const messagesContainer = document.getElementById('chatbotMessages');
                messagesContainer.scrollTop = messagesContainer.scrollHeight;
            }, 100);
        }
    }
    
    // Start typing after a small delay
    setTimeout(typeChar, 100);
}
</script>
{% endblock %}
